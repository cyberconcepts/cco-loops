<metal:data define-macro="conceptdata">
  <div tal:attributes="class string:content-$level;
                       ondblclick item/openEditWindow">
    <h3>
      <span i18n:translate="">Concept</span>:
      <span tal:content="item/title">Title</span>
    </h3>
    <table>
      <tr tal:repeat="field item/fieldData">
        <td><span tal:content="field/title"
                  i18n:translate="" />:</td>
        <td tal:content="structure field/widget"></td>
      </tr>
    </table>
    <metal:listing use-macro="item/template/macros/conceptlisting2" />
  </div>
</metal:data>


<metal:listing define-macro="conceptlisting">
  <div>
    <h3 tal:attributes="class string:content-$level;
                        ondblclick item/openEditWindow">
      <span i18n:translate="">Concept</span>:
      <span tal:content="item/title">Title</span>
    </h3>
    <metal:listing define-macro="conceptlisting2">
      <div tal:attributes="class string:content-$level;
                           ondblclick python: item.openEditWindow('configure.html')">
        <h4>Parents</h4>
        <div tal:repeat="related item/parents">
          <a href="#"
             tal:attributes="href string:${view/url}/.target${related/uniqueId}"
             tal:content="related/title">Concept Title</a>
        </div>
      </div>
      <div tal:attributes="class string:content-$level;
                           ondblclick python: item.openEditWindow('configure.html')">
        <h4>Children</h4>
        <div tal:repeat="related item/children">
          <a href="#"
             tal:attributes="href string:${view/url}/.target${related/uniqueId}"
             tal:content="related/title">Concept Title</a>
        </div>
      </div>
      <div tal:attributes="class string:content-$level;
                           ondblclick python: item.openEditWindow('resources.html')">
        <h4>Resources</h4>
        <div tal:repeat="related item/resources">
          <a href="#"
             tal:attributes="href string:${view/url}/.target${related/uniqueId}"
             tal:content="related/title">Resource Title</a>
        </div>
      </div>
    </metal:listing>
  </div>
</metal:listing>
