<!-- $Id$ -->


<metal:report define-macro="report"
              tal:define="info item/getData">
  <metal:title use-macro="item/conceptMacros/concepttitle" />
  <br />
  <metal:listing use-macro="info/macro" />
</metal:report>


<metal:overview define-macro="overview">
  <table class="listing">
    <tr>
      <th i18n:translate="">Period</th>
      <th i18n:translate="">Access</th>
      <th i18n:translate="">Changes</th>
      <th i18n:translate="">Additions</th>
      <th i18n:translate="">Total</th>
    </tr>
    <tr tal:repeat="row info/data"
        tal:attributes="class python: repeat['row'].odd() and 'even' or 'odd'">
      <td tal:content="row/period"></td>
      <td class="number"
          tal:content="row/access"></td>
      <td class="number"
          tal:content="row/changed"></td>
      <td class="number"
          tal:content="row/new"></td>
      <td class="number"
          tal:content="row/count"></td>
    </tr>
  </table>
</metal:overview>


<metal:recent define-macro="recent_changes">
  <table class="listing">
    <tr>
      <th i18n:translate="">Title</th>
      <th i18n:translate="">Type</th>
      <th i18n:translate=""
          tal:condition="view/useVersioning">V</th>
      <th i18n:translate="">User</th>
      <th i18n:translate="">Date/Time</th>
      <th i18n:translate="">New</th>
    </tr>
    <tr tal:repeat="row info/data"
        tal:attributes="class python: repeat['row'].odd() and 'even' or 'odd'">
      <tal:row define="object row/objectData;
                       url object/url">
        <td tal:attributes="title object/object/description">
          <a tal:omit-tag="not:url"
             tal:attributes="href string:$url?version=this"
             tal:content="object/title" /></td>
        <td tal:content="object/type"></td>
        <tal:version tal:condition="view/useVersioning">
          <td class="center"
              tal:define="version object/version">
            <a tal:omit-tag="python: version == '1.1'"
               tal:attributes="href string:$url?loops.viewName=listversions"
               tal:content="version">1.1</a>
          </td>
        </tal:version>
        <td tal:define="url row/user/url">
          <a tal:attributes="href url"
             tal:omit-tag="not:url"
             tal:content="row/user/title" /></td>
        <td tal:content="row/timeStamp"></td>
        <td class="center"
            tal:content="row/markNew"></td>
      </tal:row>
    </tr>
  </table>
</metal:recent>
