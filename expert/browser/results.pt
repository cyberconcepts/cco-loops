<html i18n:domain="loops">


<div metal:define-macro="main"
     tal:define="item nocall:item/virtualTarget;
                 report view/reportInstance">
  <div tal:attributes="class string:content-$level;">
      <metal:block use-macro="view/concept_macros/concepttitle" />
  </div>
  <div>
    <a tal:attributes="href view/reportUrl">Back to the report definition</a>
  </div>
  <div metal:use-macro="view/resultsRenderer" />
</div>


<div metal:define-macro="results">
  <table class="report"
         tal:define="results view/results">
    <tr>
        <th tal:repeat="col results/displayedColumns"
            tal:content="col/title"
            i18n:translate="" />
    </tr>
    <tr tal:repeat="row results">
        <td tal:repeat="col results/displayedColumns">
            <metal:column use-macro="python:view.getColumnRenderer(col)" />
        </td>
    </tr>
    <tr tal:define="row nocall:results/totals"
        tal:condition="nocall:row">
        <td tal:repeat="col results/displayedColumns">
            <metal:column use-macro="python:view.getColumnRenderer(col)" />
        </td>
    </tr>
  </table>
</div>


<metal:standard define-macro="standard">
  <tal:column content="structure python:col.getDisplayValue(row)" />
</metal:standard>


<metal:right define-macro="center">
  <tal:column content="python:col.getDisplayValue(row)" />
</metal:right>


<metal:right define-macro="right">
  <tal:column content="python:col.getDisplayValue(row)" />
</metal:right>


<metal:target define-macro="target">
  <tal:column define="value python:col.getDisplayValue(row)">
    <a tal:omit-tag="python:not getattr(item, 'showLinks', True) or not value['url']"
       tal:attributes="href value/url"
       tal:content="value/title" />
  </tal:column>
</metal:target>

<metal:standard define-macro="multiline">
  <tal:column define="values python:col.getDisplayValues(row)">
    <tal:values repeat="value values">
      <span tal:replace="value" />
      <span tal:condition="python: repeat['value'].index() < len(values)">
        <br/>
      </span>
    </tal:values>
  </tal:column>
</metal:standard>

<div metal:define-macro="subreport">
  <tal:column>
    <table class="subreport"
           tal:define="results python:col.getValue(row)">
      <tr>
        <th tal:repeat="col results/displayedColumns"
            tal:content="col/title"
            i18n:translate="" />
      </tr>
      <tr tal:repeat="row results">
        <td tal:repeat="col results/displayedColumns">
            <metal:column use-macro="python:view.getColumnRenderer(col)" />
        </td>
      </tr>
      <tr tal:define="row nocall:results/totals"
        tal:condition="nocall:row">
        <td tal:repeat="col results/displayedColumns">
            <metal:column use-macro="python:view.getColumnRenderer(col)" />
        </td>
      </tr>
    </table>
  </tal:column>
</div>


</html>
