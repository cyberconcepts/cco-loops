<metal:search define-macro="search">
  <div id="search"
       tal:define="template nocall:item/template">
    <h3 tal:attributes="class string:content-$level;
                        ondblclick item/openEditWindow">
      Search
    </h3>

    <div metal:define-macro="search_form">
      <fieldset class="box">
        <form action=".">
          <table cellpadding="3">
            <tal:block define="search_selection string:type">
              <metal:row use-macro="template/macros/search_row" />
            </tal:block>
            <tal:block define="search_selection string:text">
              <metal:row use-macro="template/macros/search_row" />
            </tal:block>
            <tr>
              <td colspan="2">
                <input type="button" name="search.add.1" value=" Add filter " />
              </td>
            </tr>
          </table>
        </form>
      </fieldset>
    </div>

    <div metal:define-macro="search_results">
      <fieldset class="box">
        Search results
      </fieldset>
    </div>

  </div>
</metal:search>


<tr metal:define-macro="search_row" id="search.row.1.1">
  <td>
    <input type="button" value="&minus;" />&nbsp;
  </td>
  <td tal:define="selection search_selection | string:type">
    <select>
      <option value="type"
              tal:attributes="selected python: selection=='type'">Type</option>
      <option value="text"
              tal:attributes="selected python: selection=='text'">Text</option>
      <option value="attribute">Attribute value</option>
      <option value="concept">Concept</option>
    </select>
    <input metal:use-macro="template/macros/?selection" />
  </td>
</tr>


<metal:text define-macro="text">
  <div id="search.text.1.1">
    <input type="checkbox"
           name="search.text.title.1.1" id="search.text.title.1.1" />
    <label for="search.text.title.1.1">Title</label>
    <input type="checkbox"
           name="search.text.full.1.1" id="search.text.full.1.1" />
    <label for="search.text.full.1.1">Full text</label>&nbsp;&nbsp;
    <label for="search.text.text.1.1">Search words:</label>
    <input type="text" name="search.text.text.1.1" />
    <input type="text" name="search.text.text.1.1" />
    <input type="button" name="search.text.add.1.1" value="+" />&nbsp;
  </div>
</metal:text>


<metal:text define-macro="type">
  <div id="search.type.1.2">
    <label for="search.text.1.1">Type:</label>
    <select type="text" name="search.type.text.1.2">
      <option value=".loops/concepts/topic">Topic</option>
      <option value="loops.resource.Document">Document</option>
    </select>
    <input type="button" name="search.type.add.1.2" value="+" />&nbsp;
  </div>
</metal:text>


